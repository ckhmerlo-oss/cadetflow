{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/login/page.tsx"],"sourcesContent":["// in app/login/page.tsx\r\n'use client' \r\n\r\nimport { createClient } from '@/utils/supabase/client'\r\nimport { Auth } from '@supabase/auth-ui-react'\r\nimport { ThemeSupa } from '@supabase/auth-ui-shared'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useEffect } from 'react' // We still need useEffect for post-login\r\nimport { useTheme } from '@/app/components/ThemeProvider'\r\n\r\nexport default function LoginPage() {\r\n  const supabase = createClient()\r\n  const router = useRouter()\r\n  const { theme } = useTheme()\r\n\r\n  // This effect listens for a NEW sign-in OR a password recovery\r\n  useEffect(() => {\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\r\n      (event, session) => {\r\n        if (event === 'SIGNED_IN' && session) {\r\n          router.push('/')\r\n          router.refresh()\r\n        }\r\n        \r\n        // --- THIS IS THE CRITICAL FIX ---\r\n        if (event === 'PASSWORD_RECOVERY') {\r\n          router.push('/update-password')\r\n        }\r\n        // --- END OF FIX ---\r\n      }\r\n    )\r\n    return () => {\r\n      subscription.unsubscribe()\r\n    }\r\n  }, [supabase, router])\r\n\r\n  return (\r\n    <div style={{ width: '100%', maxWidth: '420px', margin: 'auto', paddingTop: '2rem' }}>\r\n      <Auth\r\n        supabaseClient={supabase}\r\n        appearance={{ theme: ThemeSupa }}\r\n        theme={theme}\r\n        providers={[]} \r\n        redirectTo=\"/\" \r\n      />\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;AAGxB;AACA;AACA;AACA;AACA,oVAAkC,yCAAyC;AAC3E;AAPA;;;;;;;;AASe,SAAS;IACtB,MAAM,WAAW,IAAA,2IAAY;IAC7B,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,+IAAQ;IAE1B,+DAA+D;IAC/D,IAAA,kNAAS,EAAC;QACR,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAChE,CAAC,OAAO;YACN,IAAI,UAAU,eAAe,SAAS;gBACpC,OAAO,IAAI,CAAC;gBACZ,OAAO,OAAO;YAChB;YAEA,mCAAmC;YACnC,IAAI,UAAU,qBAAqB;gBACjC,OAAO,IAAI,CAAC;YACd;QACA,qBAAqB;QACvB;QAEF,OAAO;YACL,aAAa,WAAW;QAC1B;IACF,GAAG;QAAC;QAAU;KAAO;IAErB,qBACE,8OAAC;QAAI,OAAO;YAAE,OAAO;YAAQ,UAAU;YAAS,QAAQ;YAAQ,YAAY;QAAO;kBACjF,cAAA,8OAAC,gLAAI;YACH,gBAAgB;YAChB,YAAY;gBAAE,OAAO,iLAAS;YAAC;YAC/B,OAAO;YACP,WAAW,EAAE;YACb,YAAW;;;;;;;;;;;AAInB","debugId":null}}]
}