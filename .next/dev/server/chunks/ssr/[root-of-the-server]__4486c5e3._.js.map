{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/components/ThemeProvider.tsx"],"sourcesContent":["// in app/components/ThemeProvider.tsx\r\n'use client'\r\n\r\nimport { createContext, useContext, useState, useEffect } from 'react'\r\n\r\ntype Theme = 'light' | 'dark'\r\n\r\ntype ThemeProviderState = {\r\n  theme: Theme\r\n  setTheme: (theme: Theme) => void\r\n}\r\n\r\nconst ThemeProviderContext = createContext<ThemeProviderState | undefined>(undefined)\r\n\r\nexport function ThemeProvider({\r\n  children,\r\n  defaultTheme = 'dark', // Your default\r\n}: {\r\n  children: React.ReactNode\r\n  defaultTheme?: Theme\r\n}) {\r\n  // 1. Initialize state *only* with the default theme.\r\n  // This ensures the server and client initial render are identical.\r\n  const [theme, setTheme] = useState<Theme>(defaultTheme)\r\n\r\n  useEffect(() => {\r\n    // 2. On client mount, check local storage and update state if it exists.\r\n    // This runs *after* hydration, avoiding the mismatch.\r\n    const storedTheme = window.localStorage.getItem('theme') as Theme | null\r\n    if (storedTheme) {\r\n      setTheme(storedTheme)\r\n    }\r\n  }, []) // Empty dependency array ensures this runs only once on mount\r\n\r\n  useEffect(() => {\r\n    // 3. This effect syncs any theme change (from mount or toggle)\r\n    // back to the <html> tag and local storage.\r\n    const root = window.document.documentElement\r\n    \r\n    root.classList.remove('light', 'dark')\r\n    root.classList.add(theme)\r\n    \r\n    // Save the choice to local storage\r\n    window.localStorage.setItem('theme', theme)\r\n  }, [theme]) // Runs whenever the theme state changes\r\n\r\n  const value = {\r\n    theme,\r\n    setTheme,\r\n  }\r\n\r\n  return (\r\n    <ThemeProviderContext.Provider value={value}>\r\n      {children}\r\n    </ThemeProviderContext.Provider>\r\n  )\r\n}\r\n\r\n// Custom hook to easily use the theme\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeProviderContext)\r\n  if (context === undefined) {\r\n    throw new Error('useTheme must be used within a ThemeProvider')\r\n  }\r\n  return context\r\n}"],"names":[],"mappings":"AAAA,sCAAsC;;;;;;;;AAGtC;AAFA;;;AAWA,MAAM,qCAAuB,IAAA,sNAAa,EAAiC;AAEpE,SAAS,cAAc,EAC5B,QAAQ,EACR,eAAe,MAAM,EAItB;IACC,qDAAqD;IACrD,mEAAmE;IACnE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAQ;IAE1C,IAAA,kNAAS,EAAC;QACR,yEAAyE;QACzE,sDAAsD;QACtD,MAAM,cAAc,OAAO,YAAY,CAAC,OAAO,CAAC;QAChD,IAAI,aAAa;YACf,SAAS;QACX;IACF,GAAG,EAAE,GAAE,8DAA8D;IAErE,IAAA,kNAAS,EAAC;QACR,+DAA+D;QAC/D,4CAA4C;QAC5C,MAAM,OAAO,OAAO,QAAQ,CAAC,eAAe;QAE5C,KAAK,SAAS,CAAC,MAAM,CAAC,SAAS;QAC/B,KAAK,SAAS,CAAC,GAAG,CAAC;QAEnB,mCAAmC;QACnC,OAAO,YAAY,CAAC,OAAO,CAAC,SAAS;IACvC,GAAG;QAAC;KAAM,GAAE,wCAAwC;IAEpD,MAAM,QAAQ;QACZ;QACA;IACF;IAEA,qBACE,8OAAC,qBAAqB,QAAQ;QAAC,OAAO;kBACnC;;;;;;AAGP;AAGO,MAAM,WAAW;IACtB,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/utils/supabase/client.ts"],"sourcesContent":["// in utils/supabase/client.ts\r\nimport { createBrowserClient } from '@supabase/ssr'\r\n\r\nexport function createClient() {\r\n  return createBrowserClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n  )\r\n}"],"names":[],"mappings":"AAAA,8BAA8B;;;;;AAC9B;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,iMAAmB;AAI5B","debugId":null}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/components/ThemeToggleButton.tsx"],"sourcesContent":["// in app/components/ThemeToggleButton.tsx\r\n'use client'\r\n\r\nimport { useTheme } from './ThemeProvider'\r\n\r\n// Simple Sun/Moon icons\r\nconst SunIcon = () => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-6.364-.386 1.591-1.591M3 12H.75m.386-6.364 1.591 1.591\" />\r\n  </svg>\r\n)\r\n\r\nconst MoonIcon = () => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21.752 15.002A9.718 9.718 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25c0 5.385 4.365 9.75 9.75 9.75 2.671 0 5.117-.991 6.992-2.61a.75.75 0 0 1 .01-1.06Z\" />\r\n  </svg>\r\n)\r\n\r\nexport default function ThemeToggleButton() {\r\n  const { theme, setTheme } = useTheme()\r\n\r\n  return (\r\n    <button\r\n      onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')}\r\n      className=\"p-1 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n      aria-label=\"Toggle theme\"\r\n    >\r\n      {theme === 'light' ? <MoonIcon /> : <SunIcon />}\r\n    </button>\r\n  )\r\n}"],"names":[],"mappings":"AAAA,0CAA0C;;;;;;AAG1C;AAFA;;;AAIA,wBAAwB;AACxB,MAAM,UAAU,kBACd,8OAAC;QAAI,OAAM;QAA6B,MAAK;QAAO,SAAQ;QAAY,aAAa;QAAK,QAAO;QAAe,WAAU;kBACxH,cAAA,8OAAC;YAAK,eAAc;YAAQ,gBAAe;YAAQ,GAAE;;;;;;;;;;;AAIzD,MAAM,WAAW,kBACf,8OAAC;QAAI,OAAM;QAA6B,MAAK;QAAO,SAAQ;QAAY,aAAa;QAAK,QAAO;QAAe,WAAU;kBACxH,cAAA,8OAAC;YAAK,eAAc;YAAQ,gBAAe;YAAQ,GAAE;;;;;;;;;;;AAI1C,SAAS;IACtB,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,+IAAQ;IAEpC,qBACE,8OAAC;QACC,SAAS,IAAM,SAAS,UAAU,SAAS,UAAU;QACrD,WAAU;QACV,cAAW;kBAEV,UAAU,wBAAU,8OAAC;;;;iCAAc,8OAAC;;;;;;;;;;AAG3C","debugId":null}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/components/HeaderMenu.tsx"],"sourcesContent":["// in app/components/HeaderMenu.tsx\r\n'use client'\r\n\r\nimport { useState, useEffect, useRef } from 'react'\r\nimport Link from 'next/link'\r\nimport { useRouter, usePathname } from 'next/navigation'\r\nimport { createClient } from '@/utils/supabase/client'\r\nimport ThemeToggleButton from './ThemeToggleButton'\r\n\r\n// --- Types ---\r\ntype HeaderMenuProps = {\r\n  canManage: boolean\r\n  showDailyReports: boolean\r\n  isLoggedIn: boolean\r\n  isSiteAdmin: boolean\r\n}\r\n\r\n// --- Icons ---\r\nconst HamburgerIcon = () => (\r\n  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16m-7 6h7\" />\r\n  </svg>\r\n)\r\nconst CloseIcon = () => (\r\n  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n  </svg>\r\n)\r\n\r\nexport default function HeaderMenu({ isLoggedIn, canManage, showDailyReports, isSiteAdmin }: HeaderMenuProps) {\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false)\r\n  const [isProfileOpen, setIsProfileOpen] = useState(false)\r\n  const [feedbackOpen, setFeedbackOpen] = useState(false)\r\n  const [feedbackContent, setFeedbackContent] = useState('')\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n  const [fbSuccess, setFbSuccess] = useState(false)\r\n  const [fbError, setFbError] = useState<string | null>(null)\r\n\r\n  const profileRef = useRef<HTMLDivElement>(null)\r\n  const supabase = createClient()\r\n  const router = useRouter()\r\n  const pathname = usePathname()\r\n\r\n  // Close dropdowns when clicking outside\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent) {\r\n      if (profileRef.current && !profileRef.current.contains(event.target as Node)) {\r\n        setIsProfileOpen(false)\r\n      }\r\n    }\r\n    document.addEventListener(\"mousedown\", handleClickOutside)\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\r\n  }, [])\r\n\r\n  // Close mobile menu on route change\r\n  useEffect(() => {\r\n    setIsMobileMenuOpen(false)\r\n  }, [pathname])\r\n\r\n  const handleSignOut = async () => {\r\n    await supabase.auth.signOut()\r\n    router.push('/login')\r\n    router.refresh()\r\n  }\r\n\r\n  const handleFeedbackSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setIsSubmitting(true)\r\n    setFbError(null)\r\n    \r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if(!user) {\r\n        setFbError('You must be logged in.')\r\n        setIsSubmitting(false)\r\n        return\r\n    }\r\n\r\n    const { error } = await supabase.functions.invoke('send-feedback', {\r\n        body: { content: feedbackContent, user_id: user.id }\r\n    })\r\n\r\n    if (error) {\r\n        setFbError(error.message)\r\n    } else {\r\n        setFbSuccess(true)\r\n        setTimeout(() => {\r\n            setFeedbackOpen(false)\r\n            setFeedbackContent('')\r\n            setFbSuccess(false)\r\n        }, 2000)\r\n    }\r\n    setIsSubmitting(false)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* --- DESKTOP MENU (Hidden on Mobile) --- */}\r\n      <div className=\"hidden md:flex items-center space-x-4\">\r\n        <Link \r\n            href=\"/\" \r\n            id=\"nav-dashboard\" \r\n            className=\"text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors\"\r\n        >\r\n            Dashboard\r\n        </Link>\r\n        \r\n        {isLoggedIn && (\r\n            <>\r\n            <Link \r\n                href=\"/submit\" \r\n                id=\"nav-submit\" \r\n                className=\"text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors\"\r\n            >\r\n                Submit Report\r\n            </Link>\r\n            <Link \r\n                href=\"/reports/history\" \r\n                id=\"nav-reports\" \r\n                className=\"text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors\"\r\n            >\r\n                My History\r\n            </Link>\r\n            </>\r\n        )}\r\n\r\n        {showDailyReports && (\r\n             <Link \r\n                href=\"/reports/daily\" \r\n                id=\"nav-daily\" \r\n                className=\"text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors\"\r\n            >\r\n                Green Sheet\r\n            </Link>\r\n        )}\r\n\r\n        {canManage && (\r\n            <>\r\n             <Link \r\n                href=\"/reports/pending\" \r\n                id=\"nav-approval\" \r\n                className=\"text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors\"\r\n            >\r\n                Approvals\r\n            </Link>\r\n            <Link \r\n                href=\"/manage\" \r\n                id=\"nav-roster\" \r\n                className=\"text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors\"\r\n            >\r\n                Roster\r\n            </Link>\r\n            </>\r\n        )}\r\n\r\n        {isSiteAdmin && (\r\n            <Link \r\n                href=\"/admin\" \r\n                id=\"nav-admin\" \r\n                className=\"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 px-3 py-2 rounded-md text-sm font-bold transition-colors border border-red-100 dark:border-red-900\"\r\n            >\r\n                Admin\r\n            </Link>\r\n        )}\r\n\r\n        <ThemeToggleButton />\r\n\r\n        {/* Profile Dropdown (Avatar Only) */}\r\n        {isLoggedIn ? (\r\n          <div className=\"relative ml-3\" ref={profileRef}>\r\n            <div>\r\n              <button\r\n                onClick={() => setIsProfileOpen(!isProfileOpen)}\r\n                type=\"button\"\r\n                id=\"nav-profile\" // Highlight target for \"Your Profile\"\r\n                className=\"bg-white dark:bg-gray-800 flex text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n              >\r\n                <span className=\"sr-only\">Open user menu</span>\r\n                <div className=\"h-8 w-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 font-bold border border-indigo-200 dark:border-indigo-700\">\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                    <path fillRule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                </div>\r\n              </button>\r\n            </div>\r\n            {isProfileOpen && (\r\n              <div className=\"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none z-50\">\r\n                <Link href=\"/profile/me\" className=\"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\">\r\n                    My Profile\r\n                </Link>\r\n                <button onClick={() => setFeedbackOpen(true)} className=\"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\">\r\n                    Send Feedback\r\n                </button>\r\n                <button onClick={handleSignOut} className=\"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700\">\r\n                  Sign out\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n             <Link href=\"/login\" className=\"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium\">Login</Link>\r\n        )}\r\n      </div>\r\n\r\n      {/* --- MOBILE MENU BUTTON (Visible only on Mobile) --- */}\r\n      <div className=\"-mr-2 flex md:hidden\">\r\n         <ThemeToggleButton />\r\n        <button\r\n          onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\r\n          type=\"button\"\r\n          className=\"bg-white dark:bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ml-2\"\r\n        >\r\n          <span className=\"sr-only\">Open main menu</span>\r\n          {isMobileMenuOpen ? <CloseIcon /> : <HamburgerIcon />}\r\n        </button>\r\n      </div>\r\n\r\n      {/* --- MOBILE DROPDOWN --- */}\r\n      {isMobileMenuOpen && (\r\n        <div className=\"md:hidden absolute top-16 inset-x-0 z-50 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-lg\">\r\n          <div className=\"px-2 pt-2 pb-3 space-y-1 sm:px-3\">\r\n            {/* We repeat the IDs here just in case the menu is open during a tour on mobile */}\r\n            <Link href=\"/\" id=\"nav-dashboard-mobile\" className=\"block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700\">Dashboard</Link>\r\n            \r\n            {isLoggedIn && (\r\n                <>\r\n                <Link href=\"/submit\" className=\"block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700\">Submit Report</Link>\r\n                <Link href=\"/reports/history\" className=\"block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700\">My History</Link>\r\n                </>\r\n            )}\r\n            \r\n            {showDailyReports && (\r\n                 <Link href=\"/reports/daily\" className=\"block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700\">Green Sheet</Link>\r\n            )}\r\n            \r\n            {canManage && (\r\n                <>\r\n                <Link href=\"/reports/pending\" className=\"block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700\">Approvals</Link>\r\n                <Link href=\"/manage\" className=\"block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700\">Roster</Link>\r\n                </>\r\n            )}\r\n            \r\n            {isSiteAdmin && (\r\n                <Link href=\"/admin\" className=\"block px-3 py-2 rounded-md text-base font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20\">Admin</Link>\r\n            )}\r\n          </div>\r\n\r\n          {/* Mobile Profile Section */}\r\n          {isLoggedIn ? (\r\n            <div className=\"pt-4 pb-4 border-t border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center px-5\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <div className=\"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 font-bold border border-indigo-200 dark:border-indigo-700\">\r\n                     <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                        <path fillRule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                  </div>\r\n                </div>\r\n                <div className=\"ml-3\">\r\n                  <div className=\"text-base font-medium leading-none text-gray-800 dark:text-white\">My Account</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-3 px-2 space-y-1\">\r\n                <Link href=\"/profile/me\" className=\"block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700\">Your Profile</Link>\r\n                <button onClick={() => setFeedbackOpen(true)} className=\"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700\">Feedback</button>\r\n                <button onClick={handleSignOut} className=\"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-red-600 dark:text-red-400 hover:text-red-900 hover:bg-gray-50 dark:hover:bg-gray-700\">Sign out</button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n             <div className=\"px-5 pb-4\">\r\n                 <Link href=\"/login\" className=\"block w-full text-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700\">Login</Link>\r\n             </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* FEEDBACK MODAL (Unchanged) */}\r\n      {feedbackOpen && (\r\n        <div className=\"fixed inset-0 z-[100] overflow-y-auto\" aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\r\n            <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n                <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" aria-hidden=\"true\" onClick={() => setFeedbackOpen(false)}></div>\r\n                <span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">&#8203;</span>\r\n                <div className=\"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full border border-gray-200 dark:border-gray-700\">\r\n                  <div className=\"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n                    <div className=\"sm:flex sm:items-start\">\r\n                      <div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full\">\r\n                        <h3 className=\"text-lg leading-6 font-medium text-gray-900 dark:text-white\" id=\"modal-title\">Submit Feedback</h3>\r\n                        <div className=\"mt-4\">\r\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Details</label>\r\n                            <textarea value={feedbackContent} onChange={e => setFeedbackContent(e.target.value)} rows={4} required className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2\" />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"bg-gray-50 dark:bg-gray-900/50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6\">\r\n                    <button type=\"button\" onClick={handleFeedbackSubmit} disabled={isSubmitting || fbSuccess} className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50\">{isSubmitting ? 'Sending...' : 'Submit'}</button>\r\n                    <button type=\"button\" onClick={() => setFeedbackOpen(false)} className=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\">Close</button>\r\n                  </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 895, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/onboarding/actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from '@/utils/supabase/server'\r\n\r\nexport async function completeTutorial() {\r\n  const supabase = createClient()\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  \r\n  if (!user) return\r\n  \r\n  await supabase\r\n    .from('profiles')\r\n    .update({ tutorial_completed: true })\r\n    .eq('id', user.id)\r\n}"],"names":[],"mappings":";;;;;;;IAIsB,mBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 907, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/components/tour/TourConfig.ts"],"sourcesContent":["export type TourStep = {\r\n  targetId: string;\r\n  title: string;\r\n  content: string;\r\n  position?: 'top' | 'bottom' | 'left' | 'right';\r\n}\r\n\r\n// Mapping: Role -> Route -> Steps\r\nexport const ROLE_TOURS: Record<number, Record<string, TourStep[]>> = {\r\n  \r\n  // --- CADET (Level 10) ---\r\n  10: {\r\n    '/': [\r\n      { targetId: 'nav-dashboard', title: 'Dashboard Home', content: 'This is your main dashboard. Use the navigation bar to access other pages.', position: 'bottom' },\r\n      { targetId: 'dashboard-demerits-card', title: 'Demerit Balance', content: 'This card shows your current active demerits. Keep this number low!', position: 'bottom' },\r\n      { targetId: 'dashboard-tours-card', title: 'Tour Balance', content: 'This is your calculated punishment balance (Tours). 1 Demerit usually equals 1 Tour once your credits are gone.', position: 'bottom' },\r\n    ],\r\n    '/submit': [\r\n      { targetId: 'submit-report-form', title: 'Submission Form', content: 'Select the cadet you are reporting and the offense type here. Be accurate.', position: 'right' }\r\n    ],\r\n    '/reports/history': [\r\n      { targetId: 'history-table-container', title: 'Report History', content: 'This table logs every report you have received. Click any row to view full details or file an appeal.', position: 'top' }\r\n    ]\r\n  },\r\n\r\n  // --- STAFF (Level 50+) ---\r\n  50: {\r\n    '/': [\r\n      { targetId: 'nav-daily', title: 'Green Sheet Access', content: 'Click here to view the Daily Disciplinary Report (Green Sheet).', position: 'bottom' },\r\n      { targetId: 'nav-approval', title: 'Approval Queue', content: 'You have reports waiting for your review. Check this daily.', position: 'bottom' }\r\n    ],\r\n    '/reports/daily': [\r\n      { targetId: 'green-sheet-print-btn', title: 'Print Report', content: 'Generate a clean, printable PDF version of the daily report for the bulletin board.', position: 'left' },\r\n      { targetId: 'green-sheet-tabs', title: 'Tour Sheet Toggle', content: 'Switch between the \"Green Sheet\" (Daily Summary) and the \"Tour Sheet\" (Punishment Log) here.', position: 'bottom' }\r\n    ],\r\n    '/reports/pending': [\r\n      { targetId: 'pending-approval-list', title: 'Pending Reports', content: 'These reports require your attention. Click a row to Approve, Reject, or Request Revision.', position: 'top' }\r\n    ],\r\n    '/manage': [\r\n      { targetId: 'roster-controls', title: 'Roster Management', content: 'Use these filters to find cadets by Company, Year, or Name.', position: 'bottom' },\r\n      { targetId: 'roster-table', title: 'Cadet Records', content: 'Click on any cadet to view their full profile, history, and edit their details.', position: 'top' }\r\n    ]\r\n  },\r\n\r\n  // --- ADMIN (Level 90+) ---\r\n  90: {\r\n    '/admin': [\r\n      { targetId: 'admin-tab-nav', title: 'Configuration Tabs', content: 'Switch between Role Management, Infraction Catalog, and System Settings.', position: 'bottom' },\r\n      { targetId: 'admin-create-btn', title: 'Create New', content: 'Use this button to add new roles or infraction types to the system.', position: 'left' }\r\n    ]\r\n    // Admins automatically inherit Staff tours for other pages via logic below\r\n  }\r\n}\r\n\r\nexport const getStepsForPage = (role: number, pathname: string) => {\r\n  // 1. Determine config\r\n  let config = ROLE_TOURS[10]; // Default to Cadet\r\n  if (role >= 90) config = { ...ROLE_TOURS[10], ...ROLE_TOURS[50], ...ROLE_TOURS[90] }; // Admin gets everything\r\n  else if (role >= 50) config = { ...ROLE_TOURS[10], ...ROLE_TOURS[50] }; // Staff gets Cadet + Staff\r\n\r\n  // 2. Return steps for current path\r\n  return config[pathname] || [];\r\n}"],"names":[],"mappings":";;;;;;AAQO,MAAM,aAAyD;IAEpE,2BAA2B;IAC3B,IAAI;QACF,KAAK;YACH;gBAAE,UAAU;gBAAiB,OAAO;gBAAkB,SAAS;gBAA8E,UAAU;YAAS;YAChK;gBAAE,UAAU;gBAA2B,OAAO;gBAAmB,SAAS;gBAAuE,UAAU;YAAS;YACpK;gBAAE,UAAU;gBAAwB,OAAO;gBAAgB,SAAS;gBAAmH,UAAU;YAAS;SAC3M;QACD,WAAW;YACT;gBAAE,UAAU;gBAAsB,OAAO;gBAAmB,SAAS;gBAA8E,UAAU;YAAQ;SACtK;QACD,oBAAoB;YAClB;gBAAE,UAAU;gBAA2B,OAAO;gBAAkB,SAAS;gBAAyG,UAAU;YAAM;SACnM;IACH;IAEA,4BAA4B;IAC5B,IAAI;QACF,KAAK;YACH;gBAAE,UAAU;gBAAa,OAAO;gBAAsB,SAAS;gBAAmE,UAAU;YAAS;YACrJ;gBAAE,UAAU;gBAAgB,OAAO;gBAAkB,SAAS;gBAA+D,UAAU;YAAS;SACjJ;QACD,kBAAkB;YAChB;gBAAE,UAAU;gBAAyB,OAAO;gBAAgB,SAAS;gBAAuF,UAAU;YAAO;YAC7K;gBAAE,UAAU;gBAAoB,OAAO;gBAAqB,SAAS;gBAAgG,UAAU;YAAS;SACzL;QACD,oBAAoB;YAClB;gBAAE,UAAU;gBAAyB,OAAO;gBAAmB,SAAS;gBAA8F,UAAU;YAAM;SACvL;QACD,WAAW;YACT;gBAAE,UAAU;gBAAmB,OAAO;gBAAqB,SAAS;gBAA+D,UAAU;YAAS;YACtJ;gBAAE,UAAU;gBAAgB,OAAO;gBAAiB,SAAS;gBAAmF,UAAU;YAAM;SACjK;IACH;IAEA,4BAA4B;IAC5B,IAAI;QACF,UAAU;YACR;gBAAE,UAAU;gBAAiB,OAAO;gBAAsB,SAAS;gBAA4E,UAAU;YAAS;YAClK;gBAAE,UAAU;gBAAoB,OAAO;gBAAc,SAAS;gBAAuE,UAAU;YAAO;SACvJ;IAEH;AACF;AAEO,MAAM,kBAAkB,CAAC,MAAc;IAC5C,sBAAsB;IACtB,IAAI,SAAS,UAAU,CAAC,GAAG,EAAE,mBAAmB;IAChD,IAAI,QAAQ,IAAI,SAAS;QAAE,GAAG,UAAU,CAAC,GAAG;QAAE,GAAG,UAAU,CAAC,GAAG;QAAE,GAAG,UAAU,CAAC,GAAG;IAAC,GAAG,wBAAwB;SACzG,IAAI,QAAQ,IAAI,SAAS;QAAE,GAAG,UAAU,CAAC,GAAG;QAAE,GAAG,UAAU,CAAC,GAAG;IAAC,GAAG,2BAA2B;IAEnG,mCAAmC;IACnC,OAAO,MAAM,CAAC,SAAS,IAAI,EAAE;AAC/B","debugId":null}},
    {"offset": {"line": 1043, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/components/tour/OnboardingTour.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { usePathname } from 'next/navigation'\r\nimport { completeTutorial } from '@/app/onboarding/actions'\r\nimport { getStepsForPage } from './TourConfig'\r\n\r\nexport default function OnboardingTour({ \r\n  userRole, \r\n  isCompleted \r\n}: { \r\n  userRole: number, \r\n  isCompleted: boolean \r\n}) {\r\n  const pathname = usePathname()\r\n  const [isOpen, setIsOpen] = useState(!isCompleted)\r\n  \r\n  // We track the step index LOCAL to the current page\r\n  const [currentStepIndex, setCurrentStepIndex] = useState(0)\r\n  const [stepPosition, setStepPosition] = useState<{top: number, left: number, width: number, height: number} | null>(null)\r\n\r\n  // Reset step index when changing pages\r\n  useEffect(() => {\r\n    setCurrentStepIndex(0)\r\n  }, [pathname])\r\n\r\n  // Get steps for THIS page\r\n  const steps = getStepsForPage(userRole, pathname)\r\n  const currentStep = steps[currentStepIndex]\r\n\r\n  // Logic to find element\r\n  useEffect(() => {\r\n    if (!isOpen || !currentStep) return\r\n\r\n    const updatePosition = () => {\r\n      const element = document.getElementById(currentStep.targetId)\r\n      if (element) {\r\n        const rect = element.getBoundingClientRect()\r\n        setStepPosition({\r\n          top: rect.top + window.scrollY,\r\n          left: rect.left + window.scrollX,\r\n          width: rect.width,\r\n          height: rect.height\r\n        })\r\n        element.scrollIntoView({ behavior: 'smooth', block: 'center' })\r\n      }\r\n    }\r\n\r\n    const timer = setTimeout(updatePosition, 500)\r\n    window.addEventListener('resize', updatePosition)\r\n    return () => {\r\n      clearTimeout(timer)\r\n      window.removeEventListener('resize', updatePosition)\r\n    }\r\n  }, [currentStepIndex, isOpen, currentStep, pathname])\r\n\r\n  const handleNext = async () => {\r\n    if (currentStepIndex < steps.length - 1) {\r\n      setCurrentStepIndex(prev => prev + 1)\r\n    } else {\r\n      // End of tour for THIS page. \r\n      setIsOpen(false) \r\n    }\r\n  }\r\n\r\n  const handleDismissGlobal = async () => {\r\n    setIsOpen(false)\r\n    await completeTutorial() // Marks the whole tutorial as done in DB\r\n  }\r\n\r\n  // If no steps for this page, render nothing\r\n  if (!isOpen || !currentStep || !stepPosition) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[100] pointer-events-none\">\r\n      <div className=\"absolute inset-0 bg-black/50 transition-all duration-300 ease-in-out\" />\r\n      \r\n      <div \r\n        className=\"absolute transition-all duration-300 ease-in-out border-2 border-indigo-500 rounded-lg shadow-[0_0_0_9999px_rgba(0,0,0,0.7)]\"\r\n        style={{\r\n          top: stepPosition.top - 4,\r\n          left: stepPosition.left - 4,\r\n          width: stepPosition.width + 8,\r\n          height: stepPosition.height + 8,\r\n        }}\r\n      />\r\n\r\n      <div \r\n        className=\"absolute pointer-events-auto bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-80 transition-all duration-300\"\r\n        style={{\r\n          top: stepPosition.top + stepPosition.height + 20,\r\n          left: Math.max(20, Math.min(window.innerWidth - 340, stepPosition.left + (stepPosition.width / 2) - 160)),\r\n        }}\r\n      >\r\n        <div className=\"flex justify-between items-start mb-2\">\r\n          <span className=\"text-xs font-bold text-indigo-600 uppercase tracking-wider\">\r\n            {currentStep.title}\r\n          </span>\r\n          <button onClick={() => setIsOpen(false)} className=\"text-gray-400 hover:text-gray-600\">\r\n            âœ•\r\n          </button>\r\n        </div>\r\n        \r\n        <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-6 leading-relaxed\">\r\n          {currentStep.content}\r\n        </p>\r\n\r\n        <div className=\"flex justify-between items-center border-t border-gray-100 dark:border-gray-700 pt-4\">\r\n          <button \r\n            onClick={handleDismissGlobal}\r\n            className=\"text-xs text-gray-400 hover:text-gray-600 underline\"\r\n          >\r\n            Don't show again\r\n          </button>\r\n          <div className=\"flex gap-2\">\r\n            <span className=\"text-xs text-gray-400 self-center mr-2\">\r\n                {currentStepIndex + 1} / {steps.length}\r\n            </span>\r\n            <button \r\n                onClick={handleNext}\r\n                className=\"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg shadow-sm\"\r\n            >\r\n                {currentStepIndex === steps.length - 1 ? 'Done' : 'Next'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-white dark:bg-gray-800 border-t border-l border-gray-200 dark:border-gray-700 rotate-45 transform\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}