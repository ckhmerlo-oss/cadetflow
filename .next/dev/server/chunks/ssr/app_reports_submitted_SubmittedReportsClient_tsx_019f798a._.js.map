{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/reports/submitted/SubmittedReportsClient.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useMemo } from 'react'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/navigation'\r\nimport { SubmittedReport, fetchSubmittedReports } from './actions'\r\n\r\n// ... (Keep Helpers & Colors)\r\n\r\n// ... (Keep Types)\r\n\r\nexport default function SubmittedReportsClient({ initialReports }: { initialReports: SubmittedReport[] }) {\r\n  // ... (Keep State & Handlers)\r\n\r\n  // ... (Keep processedReports logic)\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      \r\n      {/* --- FLOATING FILTER CARD --- */}\r\n      <div className=\"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm\">\r\n          {/* ... (Insert same floating toolbar JSX as ReportHistoryClient) ... */}\r\n          {/* I will omit full duplication here to save space, but the structure is identical: \r\n              flex container -> 1/3 Search -> 2/3 Filter Group \r\n          */}\r\n           <div className=\"flex flex-col lg:flex-row gap-4 items-end\">\r\n            <div className=\"w-full lg:w-1/3 relative\">\r\n                <label className=\"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1\">Search My Reports</label>\r\n                {/* ... Search Input ... */}\r\n                 <div className=\"relative\">\r\n                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                        <svg className=\"h-5 w-5 text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\" clipRule=\"evenodd\" /></svg>\r\n                    </div>\r\n                    <input type=\"text\" placeholder=\"Search...\" className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm sm:text-sm py-2 pl-10 pr-3 focus:ring-indigo-500 focus:border-indigo-500\" value={searchTerm} onChange={e => setSearchTerm(e.target.value)} />\r\n                </div>\r\n            </div>\r\n            <div className=\"w-full lg:w-2/3 flex flex-col sm:flex-row gap-4\">\r\n                <div className=\"w-full sm:w-1/3\">\r\n                    <label className=\"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1\">Filter By</label>\r\n                    <select value={filterType} onChange={e => handleFilterTypeChange(e.target.value as FilterType)} className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm sm:text-sm py-2 px-3 focus:ring-indigo-500 focus:border-indigo-500\">\r\n                        <option value=\"all\">None</option>\r\n                        <option value=\"date_range\">Date Range</option>\r\n                        <option value=\"subject\">Subject</option>\r\n                        <option value=\"offense\">Infraction</option>\r\n                        <option value=\"status\">Status</option>\r\n                        <option value=\"appeal\">Appeal Status</option>\r\n                    </select>\r\n                </div>\r\n                <div className=\"w-full sm:w-2/3\">\r\n                    {filterType === 'date_range' ? (\r\n                        <div className=\"flex gap-2\">\r\n                            <div className=\"w-1/2\"><label className=\"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1\">From</label><input type=\"date\" value={startDate} onChange={e => setStartDate(e.target.value)} className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm sm:text-sm py-2 px-3\" /></div>\r\n                            <div className=\"w-1/2\"><label className=\"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1\">To</label><input type=\"date\" value={endDate} onChange={e => setEndDate(e.target.value)} className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm sm:text-sm py-2 px-3\" /></div>\r\n                        </div>\r\n                    ) : (\r\n                        <div>\r\n                             <label className={`block text-xs font-bold uppercase mb-1 ${filterType === 'all' ? 'text-gray-300 dark:text-gray-600' : 'text-gray-500 dark:text-gray-400'}`}>{filterType === 'all' ? 'Select Filter Type First' : 'Select Value'}</label>\r\n                             <select value={filterValue} onChange={e => setFilterValue(e.target.value)} disabled={filterType === 'all'} className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm sm:text-sm py-2 px-3 disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-900\">\r\n                                <option value=\"\">{filterType === 'all' ? 'â€”' : 'Select...'}</option>\r\n                                {filterType === 'subject' && uniqueSubjects.map(s => <option key={s} value={s}>{s}</option>)}\r\n                                {filterType === 'offense' && uniqueOffenses.map(s => <option key={s} value={s}>{s}</option>)}\r\n                                {filterType === 'status' && uniqueStatuses.map(s => <option key={s} value={s}>{s}</option>)}\r\n                                {filterType === 'appeal' && uniqueAppeals.map(s => <option key={s} value={s}>{s}</option>)}\r\n                             </select>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n          </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700\">\r\n         {/* ... Table Content (Same as before, no changes) ... */}\r\n         {/* Just wrapping the existing table logic here */}\r\n         <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\r\n                {/* ... table head & body ... */}\r\n                <thead className=\"bg-gray-50 dark:bg-gray-800\">\r\n                  <tr>\r\n                    <th onClick={() => handleSort('status')} className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700\">Status <SortIcon column=\"status\"/></th>\r\n                    <th onClick={() => handleSort('appeal')} className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700\">Appeal <SortIcon column=\"appeal\"/></th>\r\n                    <th onClick={() => handleSort('subject')} className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700\">Subject <SortIcon column=\"subject\"/></th>\r\n                    <th onClick={() => handleSort('offense')} className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700\">Infraction <SortIcon column=\"offense\"/></th>\r\n                    <th onClick={() => handleSort('demerits')} className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700\">Dem <SortIcon column=\"demerits\"/></th>\r\n                    <th onClick={() => handleSort('date')} className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700\">Date <SortIcon column=\"date\"/></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\r\n                   {/* ... table rows map ... */}\r\n                   {processedReports.length > 0 ? processedReports.map(report => {\r\n                        // ... (Same row logic as previous response) ...\r\n                        const appealStatus = report.appeals?.[0]?.status;\r\n                        return (\r\n                            <React.Fragment key={report.id}>\r\n                                <tr onClick={() => setExpandedId(expandedId === report.id ? null : report.id)} className=\"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\">\r\n                                    {/* Cells */}\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap\"><span className={`px-2 py-0.5 rounded-full text-xs font-bold ${STATUS_COLORS[report.status]}`}>{report.status.replace('_', ' ')}</span></td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap\">{appealStatus ? <span className={`px-2 py-0.5 rounded text-xs font-medium ${APPEAL_COLORS[appealStatus]}`}>{appealStatus.replace(/_/g, ' ')}</span> : <span className=\"text-gray-300\">-</span>}</td>\r\n                                    <td className=\"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white\">{formatName(report.subject)}</td>\r\n                                    <td className=\"px-6 py-4 text-sm text-gray-500 dark:text-gray-300\">{report.offense_type.offense_name}</td>\r\n                                    <td className=\"px-6 py-4 text-sm font-bold text-red-600 dark:text-red-400\">{report.demerits_effective}</td>\r\n                                    <td className=\"px-6 py-4 text-sm text-gray-500 dark:text-gray-400\">{new Date(report.created_at).toLocaleDateString()}</td>\r\n                                </tr>\r\n                                {/* Expanded Row Content (Same as History) */}\r\n                                {expandedId === report.id && (\r\n                                    <tr className=\"bg-gray-50 dark:bg-gray-900/30 shadow-inner\">\r\n                                        <td colSpan={6} className=\"px-6 py-6\">\r\n                                            {/* ... Grid details ... */}\r\n                                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                                                {/* ... Detail Columns ... */}\r\n                                                 <div className=\"space-y-4\">\r\n                                                    <h4 className=\"text-xs font-bold text-gray-500 uppercase tracking-wider\">Report Details</h4>\r\n                                                    <div className=\"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 space-y-3\">\r\n                                                        <p className=\"text-sm text-gray-900 dark:text-white\"><strong>Date:</strong> {new Date(report.date_of_offense).toLocaleString()}</p>\r\n                                                        <p className=\"text-sm text-gray-700 dark:text-gray-300\"><strong>Notes:</strong> {report.notes || 'None'}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                {/* ... Timeline ... */}\r\n                                                <div className=\"space-y-4\">\r\n                                                    <h4 className=\"text-xs font-bold text-gray-500 uppercase tracking-wider\">Approval Chain</h4>\r\n                                                    <ul className=\"bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 divide-y divide-gray-100 dark:divide-gray-700\">\r\n                                                        {report.approval_log.map((log, i) => (\r\n                                                            <li key={i} className=\"p-3 text-sm\">\r\n                                                                <div className=\"flex justify-between font-medium text-gray-900 dark:text-white\"><span>{formatName(log.actor)}</span><span className=\"text-xs text-gray-500\">{new Date(log.created_at).toLocaleDateString()}</span></div>\r\n                                                                <p className=\"text-xs text-gray-600 mt-1\"><span className=\"uppercase font-bold\">{log.action}</span> {log.comment && `- \"${log.comment}\"`}</p>\r\n                                                            </li>\r\n                                                        ))}\r\n                                                    </ul>\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                )}\r\n                            </React.Fragment>\r\n                        )\r\n                   }) : <tr><td colSpan={6} className=\"px-6 py-10 text-center text-gray-500\">No reports found.</td></tr>}\r\n                </tbody>\r\n            </table>\r\n         </div>\r\n      </div>\r\n      \r\n      {/* Load More Button (Same) */}\r\n      {hasMore && (\r\n         <div className=\"p-4 flex justify-center bg-gray-100 dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-600\">\r\n            <button onClick={handleLoadMore} disabled={isLoadingMore} className=\"px-6 py-2 bg-white border rounded-full shadow-sm text-indigo-600 text-sm font-medium\">{isLoadingMore ? 'Loading...' : 'Load More'}</button>\r\n         </div>\r\n      )}\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}