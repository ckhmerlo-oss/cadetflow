{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/profile/constants.ts"],"sourcesContent":["export const CADET_RANKS = [\r\n  'c/PVT', 'c/PV2', 'c/PFC', 'c/CPL', 'c/SGT', 'c/SSG', 'c/SFC', 'c/MSG', 'c/1SG', 'c/SGM', 'c/CSM', \r\n  'c/2LT', 'c/1LT', 'c/CPT', 'c/MAJ', 'c/LTC', 'c/COL'\r\n];\r\n\r\nexport const FALL_SPORTS = [\r\n  'None', 'JV Football','Varsity Football', 'JV Soccer', 'Varsity Soccer', 'Cross Country', 'Swimming (Off Season)', 'PG Lacross', 'PG Basketball', 'PG Football', 'PT'\r\n];\r\n\r\nexport const WINTER_SPORTS = [\r\n  'None', 'JV Basketball', 'Varsity Basketball', 'Wrestling', 'Swimming', 'Indoor Track', 'PG Lacrosse', 'PG Basketball', 'PT' \r\n];\r\n\r\nexport const SPRING_SPORTS = [\r\n  'None', 'Baseball', 'Varsity Lacrosse', 'Track & Field', 'Tennis', 'Golf', 'PG Basketball', 'PG Lacrosse', \r\n];\r\n\r\nexport const CONDUCT_STATUSES = [\r\n  'Exemplary',\r\n  'Commendable',\r\n  'Satisfactory',\r\n  'Deficient',\r\n  'Unsatisfactory'\r\n];\r\n\r\nexport const PROBATION_STATUSES = [\r\n  'None',\r\n  'Academic',\r\n  'Disciplinary',\r\n  'Honor',\r\n  'Physical'\r\n];\r\n\r\nexport const GRADE_LEVELS = [\r\n  '7th', '8th', '9th', '10th', '11th', '12th', 'PG'\r\n];\r\n\r\n// Roles authorized to EDIT profiles\r\nexport const EDIT_AUTHORIZED_ROLES = [\r\n  'S1', \r\n  'Command Sergeant Major', \r\n  'TAC Officer', \r\n  'Deputy Commandant', \r\n  'Commandant', \r\n  'Admin'\r\n];\r\n\r\n// Roles authorized to manage Star Tours\r\nexport const STAR_TOUR_AUTHORIZED_ROLES = [\r\n  'Commandant', \r\n  'Deputy Commandant', \r\n  'Admin'\r\n];"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAO,MAAM,cAAc;IACzB;IAAS;IAAS;IAAS;IAAS;IAAS;IAAS;IAAS;IAAS;IAAS;IAAS;IAC1F;IAAS;IAAS;IAAS;IAAS;IAAS;CAC9C;AAEM,MAAM,cAAc;IACzB;IAAQ;IAAc;IAAoB;IAAa;IAAkB;IAAiB;IAAyB;IAAc;IAAiB;IAAe;CAClK;AAEM,MAAM,gBAAgB;IAC3B;IAAQ;IAAiB;IAAsB;IAAa;IAAY;IAAgB;IAAe;IAAiB;CACzH;AAEM,MAAM,gBAAgB;IAC3B;IAAQ;IAAY;IAAoB;IAAiB;IAAU;IAAQ;IAAiB;CAC7F;AAEM,MAAM,mBAAmB;IAC9B;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,qBAAqB;IAChC;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,eAAe;IAC1B;IAAO;IAAO;IAAO;IAAQ;IAAQ;IAAQ;CAC9C;AAGM,MAAM,wBAAwB;IACnC;IACA;IACA;IACA;IACA;IACA;CACD;AAGM,MAAM,6BAA6B;IACxC;IACA;IACA;CACD","debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/roster/RosterClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/roster/RosterClient.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/roster/RosterClient.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+R,GAC5T,6DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/roster/RosterClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/roster/RosterClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/roster/RosterClient.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2Q,GACxS,yCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/roster/page.tsx"],"sourcesContent":["import { createClient } from '@/utils/supabase/server'\r\nimport { redirect } from 'next/navigation'\r\nimport { EDIT_AUTHORIZED_ROLES } from '@/app/profile/constants'\r\nimport RosterClient from './RosterClient'\r\n\r\n// Define Data Types\r\nexport type RosterCadet = {\r\n  id: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  cadet_rank: string | null;\r\n  company_name: string | null;\r\n  grade_level: string | null;\r\n  term_demerits: number;\r\n  year_demerits: number;\r\n  current_tour_balance: number;\r\n  has_star_tours: boolean;\r\n  conduct_status: string;\r\n  recent_reports: {\r\n    id: string;\r\n    offense_name: string;\r\n    status: string;\r\n    created_at: string;\r\n  }[] | null;\r\n}\r\n\r\nasync function getRosterData() {\r\n  const supabase = createClient()\r\n  const { data, error } = await supabase.rpc('get_full_roster')\r\n  if (error) {\r\n    console.error('Error fetching roster:', error.message)\r\n    return { rosterData: [], error: error.message }\r\n  }\r\n  return { rosterData: data as RosterCadet[], error: null }\r\n}\r\n\r\nexport default async function RosterPage() {\r\n  const supabase = createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return redirect('/login')\r\n\r\n  // 1. FETCH VIEWER PROFILE\r\n  const { data: viewerProfile } = await supabase\r\n    .from('profiles')\r\n    .select(`\r\n        role:role_id (role_name, default_role_level, can_manage_all_rosters, can_manage_own_company_roster)\r\n    `)\r\n    .eq('id', user.id)\r\n    .single()\r\n\r\n  const viewerRoleName = (viewerProfile?.role as any)?.role_name || ''\r\n  const canManageAll = (viewerProfile?.role as any)?.can_manage_all_rosters || false\r\n  const canManageOwn = (viewerProfile?.role as any)?.can_manage_own_company_roster || false\r\n  const isAdmin = viewerRoleName === 'Admin'\r\n  \r\n  const canEditProfiles = EDIT_AUTHORIZED_ROLES.includes(viewerRoleName) || viewerRoleName.includes('TAC') || isAdmin\r\n  const canManage = canManageAll || canManageOwn\r\n\r\n  // 2. FETCH ROSTER DATA\r\n  const { rosterData, error } = await getRosterData()\r\n\r\n  // 3. FETCH CONFIG DATA (If Manager)\r\n  // We need companies and roles for the Re-Assign Modal\r\n  let companies = []\r\n  let roles = []\r\n  if (canManage) {\r\n      const [compRes, roleRes] = await Promise.all([\r\n          supabase.from('companies').select('id, company_name').order('company_name'),\r\n          supabase.from('roles').select('id, role_name, default_role_level, company_id').order('default_role_level', { ascending: false })\r\n      ])\r\n      if (compRes.data) companies = compRes.data\r\n      if (roleRes.data) roles = roleRes.data\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-6\">Cadet Roster</h1>\r\n        <div className=\"p-4 text-center text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n          <p className=\"font-medium\">Error loading roster:</p>\r\n          <p className=\"text-sm\">{error}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8\">\r\n      <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-6\">Cadet Roster</h1>\r\n      <RosterClient \r\n        initialData={rosterData} \r\n        canEditProfiles={canEditProfiles} \r\n        canManage={canManage}\r\n        companies={companies}\r\n        roles={roles}\r\n      />\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;AAuBA,eAAe;IACb,MAAM,WAAW,IAAA,2IAAY;IAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,GAAG,CAAC;IAC3C,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,0BAA0B,MAAM,OAAO;QACrD,OAAO;YAAE,YAAY,EAAE;YAAE,OAAO,MAAM,OAAO;QAAC;IAChD;IACA,OAAO;QAAE,YAAY;QAAuB,OAAO;IAAK;AAC1D;AAEe,eAAe;IAC5B,MAAM,WAAW,IAAA,2IAAY;IAE7B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,OAAO,IAAA,iMAAQ,EAAC;IAE3B,0BAA0B;IAC1B,MAAM,EAAE,MAAM,aAAa,EAAE,GAAG,MAAM,SACnC,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;IAET,CAAC,EACA,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;IAET,MAAM,iBAAiB,AAAC,eAAe,MAAc,aAAa;IAClE,MAAM,eAAe,AAAC,eAAe,MAAc,0BAA0B;IAC7E,MAAM,eAAe,AAAC,eAAe,MAAc,iCAAiC;IACpF,MAAM,UAAU,mBAAmB;IAEnC,MAAM,kBAAkB,oJAAqB,CAAC,QAAQ,CAAC,mBAAmB,eAAe,QAAQ,CAAC,UAAU;IAC5G,MAAM,YAAY,gBAAgB;IAElC,uBAAuB;IACvB,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,MAAM;IAEpC,oCAAoC;IACpC,sDAAsD;IACtD,IAAI,YAAY,EAAE;IAClB,IAAI,QAAQ,EAAE;IACd,IAAI,WAAW;QACX,MAAM,CAAC,SAAS,QAAQ,GAAG,MAAM,QAAQ,GAAG,CAAC;YACzC,SAAS,IAAI,CAAC,aAAa,MAAM,CAAC,oBAAoB,KAAK,CAAC;YAC5D,SAAS,IAAI,CAAC,SAAS,MAAM,CAAC,iDAAiD,KAAK,CAAC,sBAAsB;gBAAE,WAAW;YAAM;SACjI;QACD,IAAI,QAAQ,IAAI,EAAE,YAAY,QAAQ,IAAI;QAC1C,IAAI,QAAQ,IAAI,EAAE,QAAQ,QAAQ,IAAI;IAC1C;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAwD;;;;;;8BACtE,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCAAc;;;;;;sCAC3B,8OAAC;4BAAE,WAAU;sCAAW;;;;;;;;;;;;;;;;;;IAIhC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAwD;;;;;;0BACtE,8OAAC,yIAAY;gBACX,aAAa;gBACb,iBAAiB;gBACjB,WAAW;gBACX,WAAW;gBACX,OAAO;;;;;;;;;;;;AAIf","debugId":null}}]
}