{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/inter_5972bc34.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"inter_5972bc34-module__OU16Qa__className\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/inter_5972bc34.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22layout.tsx%22,%22import%22:%22Inter%22,%22arguments%22:[{%22subsets%22:[%22latin%22]}],%22variableName%22:%22inter%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Inter', 'Inter Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,gKAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,gKAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,gKAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/utils/supabase/server.ts"],"sourcesContent":["// in utils/supabase/server.ts\r\nimport { createServerClient, type CookieOptions } from '@supabase/ssr'\r\nimport { cookies } from 'next/headers'\r\n\r\nexport function createClient() {\r\n  // Define cookieStore ONCE, at the top.\r\n  const cookieStore = cookies()\r\n\r\n  return createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        async get(name: string) {\r\n          return (await cookieStore).get(name)?.value\r\n        },\r\n        async set(name: string, value: string, options: CookieOptions) {\r\n          try {\r\n            (await cookieStore).set({ name, value, ...options })\r\n          } catch (error) {\r\n            // The `set` method was called from a Server Component.\r\n            // This can be ignored if you have middleware.\r\n          }\r\n        },\r\n        async remove(name: string, options: CookieOptions) {\r\n          try {\r\n            (await cookieStore).delete({ name, ...options })\r\n          } catch (error) {\r\n            // The `delete` method was called from a Server Component.\r\n            // This can be ignored if you have middleware.\r\n          }\r\n        },\r\n      },\r\n    }\r\n  )\r\n}"],"names":[],"mappings":"AAAA,8BAA8B;;;;;AAC9B;AAAA;AACA;;;AAEO,SAAS;IACd,uCAAuC;IACvC,MAAM,cAAc,IAAA,0IAAO;IAE3B,OAAO,IAAA,+LAAkB,sUAGvB;QACE,SAAS;YACP,MAAM,KAAI,IAAY;gBACpB,OAAO,CAAC,MAAM,WAAW,EAAE,GAAG,CAAC,OAAO;YACxC;YACA,MAAM,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBAC3D,IAAI;oBACF,CAAC,MAAM,WAAW,EAAE,GAAG,CAAC;wBAAE;wBAAM;wBAAO,GAAG,OAAO;oBAAC;gBACpD,EAAE,OAAO,OAAO;gBACd,uDAAuD;gBACvD,8CAA8C;gBAChD;YACF;YACA,MAAM,QAAO,IAAY,EAAE,OAAsB;gBAC/C,IAAI;oBACF,CAAC,MAAM,WAAW,EAAE,MAAM,CAAC;wBAAE;wBAAM,GAAG,OAAO;oBAAC;gBAChD,EAAE,OAAO,OAAO;gBACd,0DAA0D;gBAC1D,8CAA8C;gBAChD;YACF;QACF;IACF;AAEJ","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/components/ThemeProvider.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ThemeProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/ThemeProvider.tsx <module evaluation>\",\n    \"ThemeProvider\",\n);\nexport const useTheme = registerClientReference(\n    function() { throw new Error(\"Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/ThemeProvider.tsx <module evaluation>\",\n    \"useTheme\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,kEACA;AAEG,MAAM,WAAW,IAAA,wQAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,kEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/components/ThemeProvider.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ThemeProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/ThemeProvider.tsx\",\n    \"ThemeProvider\",\n);\nexport const useTheme = registerClientReference(\n    function() { throw new Error(\"Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/ThemeProvider.tsx\",\n    \"useTheme\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,8CACA;AAEG,MAAM,WAAW,IAAA,wQAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,8CACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/components/HeaderMenu.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/HeaderMenu.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/HeaderMenu.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAiS,GAC9T,+DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/components/HeaderMenu.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/HeaderMenu.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/HeaderMenu.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6Q,GAC1S,2CACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/layout.tsx"],"sourcesContent":["import './globals.css'\nimport { Inter } from 'next/font/google'\nimport Link from 'next/link'\nimport { createClient } from '@/utils/supabase/server'\nimport { ThemeProvider } from '@/app/components/ThemeProvider'\nimport HeaderMenu from '@/app/components/HeaderMenu'\nimport OnboardingTour from '@/app/components/OnboardingTour'\n\nimport { SpeedInsights } from \"@vercel/speed-insights/next\"\nimport { Analytics } from \"@vercel/analytics/next\"\n\nconst inter = Inter({ subsets: ['latin'] })\n\nexport const metadata = {\n  title: 'CadetFlow',\n  description: 'Approval workflow application',\n}\n\nexport default async function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n\n  const supabase = createClient()\n  const { data: { user } } = await supabase.auth.getUser()\n  \n  let canManage = false\n  let roleLevel = 0\n  let logoText = \"CadetFlow\";\n  let logoColor = \"text-indigo-600 hover:text-indigo-700\";\n  let isSiteAdmin = false;\n  let hasSeenTour = false;\n\n  if (user) {\n    const { data: profile } = await supabase\n      .from('profiles')\n      .select(`\n        is_site_admin,\n        has_seen_tour,\n        roles(can_manage_own_company_roster, can_manage_all_rosters, role_name, default_role_level),\n        company:companies(company_name)\n      `)\n      .eq('id', user.id)\n      .single()\n    \n    const roles = (profile as any)?.roles\n    const company = (profile as any)?.company \n\n    if (roles) {\n      roleLevel = roles.default_role_level || 0;\n      canManage = roles.can_manage_own_company_roster || roles.can_manage_all_rosters;\n    }\n    \n    // Pull profile-level flags\n    isSiteAdmin = profile?.is_site_admin || false;\n    // If profile is missing or flag is null, default to false (show tour)\n    // If profile exists and has_seen_tour is true, then we don't show it.\n    // Note: If profile doesn't exist yet (onboarding), we might want to suppress until profile is created.\n    // However, the tour is safe to show.\n    hasSeenTour = profile?.has_seen_tour || false;\n\n    // Dynamic Logo Logic\n    if (roleLevel >= 50 || (roles?.role_name && roles.role_name.includes('TAC'))) {\n      logoText = \"TACFlow\";\n      logoColor = \"text-red-600 hover:text-red-700\";\n    } else if (company?.company_name === 'Battalion Staff') { \n      logoText = \"StaffFlow\";\n      logoColor = \"text-yellow-600 hover:text-yellow-700\";\n    }\n  }\n  \n  return (\n    <html lang=\"en\" className=\"dark\" suppressHydrationWarning>\n      <body className={`${inter.className}`}>\n        <ThemeProvider defaultTheme=\"dark\">\n          <header className=\"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700\">\n            <nav className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <div className=\"flex justify-between items-center h-16\">\n                \n                <div className=\"flex-shrink-0\">\n                  <Link \n                    href=\"/\" \n                    className={`text-2xl font-bold ${logoColor} transition-colors`}\n                  >\n                    {logoText}\n                  </Link>\n                </div>\n               \n                <div className=\"flex items-center\">\n                  <HeaderMenu \n                    isLoggedIn={!!user}\n                    canManage={canManage}\n                    showDailyReports={roleLevel >= 50}\n                    isSiteAdmin={isSiteAdmin}\n                  />\n                </div>\n              </div>\n            </nav>\n          </header>\n\n          <main>\n            {/* Inject the Tour Component here. \n                It will only render if user is logged in AND hasn't seen it yet.\n                We pass all permission flags so the tour can customize itself.\n            */}\n            {user && (\n              <OnboardingTour \n                show={!hasSeenTour} \n                canManage={canManage}\n                showDailyReports={roleLevel >= 50}\n                isSiteAdmin={isSiteAdmin}\n                roleLevel={roleLevel}\n              />\n            )}\n            {children}\n          </main>\n        </ThemeProvider>\n        <SpeedInsights/>\n        <Analytics/>\n      </body>\n    </html>\n  )\n}"],"names":[],"mappings":";;;;;;;;AAEA;AACA;AACA;AACA;;;;;;AAGA;AACA;;;;;;;;;;;AAIO,MAAM,WAAW;IACtB,OAAO;IACP,aAAa;AACf;AAEe,eAAe,WAAW,EACvC,QAAQ,EAGT;IAEC,MAAM,WAAW,IAAA,2IAAY;IAC7B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAEtD,IAAI,YAAY;IAChB,IAAI,YAAY;IAChB,IAAI,WAAW;IACf,IAAI,YAAY;IAChB,IAAI,cAAc;IAClB,IAAI,cAAc;IAElB,IAAI,MAAM;QACR,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;;;MAKT,CAAC,EACA,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;QAET,MAAM,QAAS,SAAiB;QAChC,MAAM,UAAW,SAAiB;QAElC,IAAI,OAAO;YACT,YAAY,MAAM,kBAAkB,IAAI;YACxC,YAAY,MAAM,6BAA6B,IAAI,MAAM,sBAAsB;QACjF;QAEA,2BAA2B;QAC3B,cAAc,SAAS,iBAAiB;QACxC,sEAAsE;QACtE,sEAAsE;QACtE,uGAAuG;QACvG,qCAAqC;QACrC,cAAc,SAAS,iBAAiB;QAExC,qBAAqB;QACrB,IAAI,aAAa,MAAO,OAAO,aAAa,MAAM,SAAS,CAAC,QAAQ,CAAC,QAAS;YAC5E,WAAW;YACX,YAAY;QACd,OAAO,IAAI,SAAS,iBAAiB,mBAAmB;YACtD,WAAW;YACX,YAAY;QACd;IACF;IAEA,qBACE,8OAAC;QAAK,MAAK;QAAK,WAAU;QAAO,wBAAwB;kBACvD,cAAA,8OAAC;YAAK,WAAW,GAAG,oJAAK,CAAC,SAAS,EAAE;;8BACnC,8OAAC,oJAAa;oBAAC,cAAa;;sCAC1B,8OAAC;4BAAO,WAAU;sCAChB,cAAA,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;;sDAEb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,0LAAI;gDACH,MAAK;gDACL,WAAW,CAAC,mBAAmB,EAAE,UAAU,kBAAkB,CAAC;0DAE7D;;;;;;;;;;;sDAIL,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,2IAAU;gDACT,YAAY,CAAC,CAAC;gDACd,WAAW;gDACX,kBAAkB,aAAa;gDAC/B,aAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;sCAOvB,8OAAC;;gCAKE,sBACC,8OAAC;oCACC,MAAM,CAAC;oCACP,WAAW;oCACX,kBAAkB,aAAa;oCAC/B,aAAa;oCACb,WAAW;;;;;;gCAGd;;;;;;;;;;;;;8BAGL,8OAAC,wLAAa;;;;;8BACd,8OAAC,4KAAS;;;;;;;;;;;;;;;;AAIlB","debugId":null}}]
}