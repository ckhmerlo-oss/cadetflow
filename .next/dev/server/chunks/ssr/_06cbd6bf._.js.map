{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/profile/constants.ts"],"sourcesContent":["export const CADET_RANKS = [\r\n  'c/PVT', 'c/PV2', 'c/PFC', 'c/CPL', 'c/SGT', 'c/SSG', 'c/SFC', 'c/MSG', 'c/1SG', 'c/SGM', 'c/CSM', \r\n  'c/2LT', 'c/1LT', 'c/CPT', 'c/MAJ', 'c/LTC', 'c/COL'\r\n];\r\n\r\nexport const FALL_SPORTS = [\r\n  'None', 'JV Football','Varsity Football', 'JV Soccer', 'Varsity Soccer', 'Cross Country', 'Swimming (Off Season)', 'PG Lacross', 'PG Basketball', 'PG Football', 'PT'\r\n];\r\n\r\nexport const WINTER_SPORTS = [\r\n  'None', 'JV Basketball', 'Varsity Basketball', 'Wrestling', 'Swimming', 'Indoor Track', 'PG Lacrosse', 'PG Basketball', 'PT' \r\n];\r\n\r\nexport const SPRING_SPORTS = [\r\n  'None', 'Baseball', 'Varsity Lacrosse', 'Track & Field', 'Tennis', 'Golf', 'PG Basketball', 'PG Lacrosse', \r\n];\r\n\r\nexport const CONDUCT_STATUSES = [\r\n  'Exemplary',\r\n  'Commendable',\r\n  'Satisfactory',\r\n  'Deficient',\r\n  'Unsatisfactory'\r\n];\r\n\r\nexport const PROBATION_STATUSES = [\r\n  'None',\r\n  'Academic',\r\n  'Disciplinary',\r\n  'Honor',\r\n  'Physical'\r\n];\r\n\r\nexport const GRADE_LEVELS = [\r\n  '7th', '8th', '9th', '10th', '11th', '12th', 'PG'\r\n];\r\n\r\n// Roles authorized to EDIT profiles\r\nexport const EDIT_AUTHORIZED_ROLES = [\r\n  'S1', \r\n  'Command Sergeant Major', \r\n  'TAC Officer', \r\n  'Deputy Commandant', \r\n  'Commandant', \r\n  'Admin'\r\n];\r\n\r\n// Roles authorized to manage Star Tours\r\nexport const STAR_TOUR_AUTHORIZED_ROLES = [\r\n  'Commandant', \r\n  'Deputy Commandant', \r\n  'Admin'\r\n];"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAO,MAAM,cAAc;IACzB;IAAS;IAAS;IAAS;IAAS;IAAS;IAAS;IAAS;IAAS;IAAS;IAAS;IAC1F;IAAS;IAAS;IAAS;IAAS;IAAS;CAC9C;AAEM,MAAM,cAAc;IACzB;IAAQ;IAAc;IAAoB;IAAa;IAAkB;IAAiB;IAAyB;IAAc;IAAiB;IAAe;CAClK;AAEM,MAAM,gBAAgB;IAC3B;IAAQ;IAAiB;IAAsB;IAAa;IAAY;IAAgB;IAAe;IAAiB;CACzH;AAEM,MAAM,gBAAgB;IAC3B;IAAQ;IAAY;IAAoB;IAAiB;IAAU;IAAQ;IAAiB;CAC7F;AAEM,MAAM,mBAAmB;IAC9B;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,qBAAqB;IAChC;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,eAAe;IAC1B;IAAO;IAAO;IAAO;IAAQ;IAAQ;IAAQ;CAC9C;AAGM,MAAM,wBAAwB;IACnC;IACA;IACA;IACA;IACA;IACA;CACD;AAGM,MAAM,6BAA6B;IACxC;IACA;IACA;CACD","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/profile/%5Bid%5D/actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from '@/utils/supabase/server'\r\nimport { revalidatePath } from 'next/cache'\r\nimport { EDIT_AUTHORIZED_ROLES, STAR_TOUR_AUTHORIZED_ROLES } from '../constants'\r\n\r\nexport async function updateCadetProfile(cadetId: string, formData: FormData) {\r\n  const supabase = createClient()\r\n  \r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return { error: 'Unauthorized' }\r\n\r\n  const { data: editorProfile } = await supabase\r\n    .from('profiles')\r\n    .select('role:role_id (role_name)')\r\n    .eq('id', user.id)\r\n    .single()\r\n\r\n  const roleName = (editorProfile?.role as any)?.role_name || ''\r\n  \r\n  const canEdit = EDIT_AUTHORIZED_ROLES.includes(roleName) || roleName.includes('TAC') || roleName === 'Admin';\r\n  if (!canEdit) return { error: 'You do not have permission to edit profiles.' }\r\n\r\n  const updates: { [key: string]: any } = {\r\n    cadet_rank: formData.get('cadet_rank')?.toString() || null,\r\n    room_number: formData.get('room_number')?.toString() || null,\r\n    grade_level: formData.get('grade_level')?.toString() || null,\r\n    years_attended: parseInt(formData.get('years_attended')?.toString() || '0'),\r\n    probation_status: formData.get('probation_status')?.toString() || null,\r\n    sport_fall: formData.get('sport_fall')?.toString() || null,\r\n    sport_winter: formData.get('sport_winter')?.toString() || null,\r\n    sport_spring: formData.get('sport_spring')?.toString() || null,\r\n  }\r\n\r\n  const canManageStarTours = STAR_TOUR_AUTHORIZED_ROLES.includes(roleName);\r\n  if (canManageStarTours) {\r\n    updates.has_star_tours = formData.get('has_star_tours') === 'on'\r\n  }\r\n\r\n  const { error } = await supabase.from('profiles').update(updates).eq('id', cadetId)\r\n\r\n  if (error) {\r\n    console.error('Profile update error:', error.message)\r\n    return { error: `Update failed: ${error.message}` }\r\n  }\r\n\r\n  revalidatePath(`/profile/${cadetId}`)\r\n  revalidatePath(`/reports/daily`)\r\n  return { success: true }\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;;AAEO,eAAe,mBAAmB,OAAe,EAAE,QAAkB;IAC1E,MAAM,WAAW,IAAA,2IAAY;IAE7B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,OAAO;QAAE,OAAO;IAAe;IAE1C,MAAM,EAAE,MAAM,aAAa,EAAE,GAAG,MAAM,SACnC,IAAI,CAAC,YACL,MAAM,CAAC,4BACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;IAET,MAAM,WAAW,AAAC,eAAe,MAAc,aAAa;IAE5D,MAAM,UAAU,oJAAqB,CAAC,QAAQ,CAAC,aAAa,SAAS,QAAQ,CAAC,UAAU,aAAa;IACrG,IAAI,CAAC,SAAS,OAAO;QAAE,OAAO;IAA+C;IAE7E,MAAM,UAAkC;QACtC,YAAY,SAAS,GAAG,CAAC,eAAe,cAAc;QACtD,aAAa,SAAS,GAAG,CAAC,gBAAgB,cAAc;QACxD,aAAa,SAAS,GAAG,CAAC,gBAAgB,cAAc;QACxD,gBAAgB,SAAS,SAAS,GAAG,CAAC,mBAAmB,cAAc;QACvE,kBAAkB,SAAS,GAAG,CAAC,qBAAqB,cAAc;QAClE,YAAY,SAAS,GAAG,CAAC,eAAe,cAAc;QACtD,cAAc,SAAS,GAAG,CAAC,iBAAiB,cAAc;QAC1D,cAAc,SAAS,GAAG,CAAC,iBAAiB,cAAc;IAC5D;IAEA,MAAM,qBAAqB,yJAA0B,CAAC,QAAQ,CAAC;IAC/D,IAAI,oBAAoB;QACtB,QAAQ,cAAc,GAAG,SAAS,GAAG,CAAC,sBAAsB;IAC9D;IAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC,SAAS,EAAE,CAAC,MAAM;IAE3E,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,yBAAyB,MAAM,OAAO;QACpD,OAAO;YAAE,OAAO,CAAC,eAAe,EAAE,MAAM,OAAO,EAAE;QAAC;IACpD;IAEA,IAAA,+IAAc,EAAC,CAAC,SAAS,EAAE,SAAS;IACpC,IAAA,+IAAc,EAAC,CAAC,cAAc,CAAC;IAC/B,OAAO;QAAE,SAAS;IAAK;AACzB;;;IA3CsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/.next-internal/server/app/profile/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {updateCadetProfile as '60522fa0c1ab889549cd43ee3a6e075bf758d786b7'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}}]
}