{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/reports/submitted/actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from '@/utils/supabase/server'\r\n\r\nexport type SubmittedReport = {\r\n  id: string;\r\n  created_at: string;\r\n  date_of_offense: string;\r\n  status: string;\r\n  notes: string | null;\r\n  demerits_effective: number;\r\n  subject: { first_name: string, last_name: string } | null;\r\n  offense_type: { offense_name: string; demerits: number };\r\n  appeals: { status: string; justification: string | null; final_comment: string | null }[];\r\n  approval_log: { action: string; comment: string | null; created_at: string; actor: { first_name: string, last_name: string } | null }[];\r\n}\r\n\r\nexport async function fetchSubmittedReports(offset: number, limit: number) {\r\n  const supabase = createClient()\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return { error: \"Unauthorized\" }\r\n\r\n  const { data, error } = await supabase\r\n    .from('demerit_reports')\r\n    .select(`\r\n      id, created_at, date_of_offense, status, notes, demerits_effective,\r\n      subject:subject_cadet_id ( first_name, last_name ),\r\n      offense_type:offense_type_id ( offense_name, demerits ),\r\n      appeals ( status, justification, final_comment ),\r\n      approval_log ( action, comment, created_at, actor:actor_id ( first_name, last_name ) )\r\n    `)\r\n    .eq('submitted_by', user.id) // <--- Filter by Author\r\n    .order('created_at', { ascending: false })\r\n    .range(offset, offset + limit - 1)\r\n\r\n  if (error) {\r\n    console.error('Error fetching submitted:', error.message)\r\n    return { error: error.message }\r\n  }\r\n\r\n  return { data: data as unknown as SubmittedReport[] }\r\n}"],"names":[],"mappings":";;;;;;;IAiBsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"AAAA,gFAAgF;AAChF,0BAA0B;;;;;;;;;;;;;;;;IAEjBA,UAAU,EAAA;eAAVA,eAAAA,UAAU;;IAMVC,qBAAqB,EAAA;eAArBA,QAAAA,qBAAqB;;IALrBC,gBAAgB,EAAA;eAAhBA,qBAAAA,gBAAgB;;;+BADE;qCACM;wBAKK","ignoreList":[0],"debugId":null}}]
}