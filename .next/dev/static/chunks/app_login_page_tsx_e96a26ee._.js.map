{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/login/page.tsx"],"sourcesContent":["// in app/login/page.tsx\r\n'use client' \r\n\r\nimport { createClient } from '@/utils/supabase/client'\r\nimport { Auth } from '@supabase/auth-ui-react'\r\nimport { ThemeSupa } from '@supabase/auth-ui-shared'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useEffect } from 'react' // We still need useEffect for post-login\r\nimport { useTheme } from '@/app/components/ThemeProvider'\r\n\r\nexport default function LoginPage() {\r\n  const supabase = createClient()\r\n  const router = useRouter()\r\n  const { theme } = useTheme()\r\n\r\n  // This effect listens for a NEW sign-in OR a password recovery\r\n  useEffect(() => {\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\r\n      (event, session) => {\r\n        if (event === 'SIGNED_IN' && session) {\r\n          router.push('/')\r\n          router.refresh()\r\n        }\r\n        \r\n        // --- THIS IS THE CRITICAL FIX ---\r\n        if (event === 'PASSWORD_RECOVERY') {\r\n          router.push('/update-password')\r\n        }\r\n        // --- END OF FIX ---\r\n      }\r\n    )\r\n    return () => {\r\n      subscription.unsubscribe()\r\n    }\r\n  }, [supabase, router])\r\n\r\n  return (\r\n    <div style={{ width: '100%', maxWidth: '420px', margin: 'auto', paddingTop: '2rem' }}>\r\n      <Auth\r\n        supabaseClient={supabase}\r\n        appearance={{ theme: ThemeSupa }}\r\n        theme={theme}\r\n        providers={[]} \r\n        redirectTo=\"/\" \r\n      />\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;AAGxB;AACA;AACA;AACA;AACA,mRAAkC,yCAAyC;AAC3E;;;AAPA;;;;;;;AASe,SAAS;;IACtB,MAAM,WAAW,IAAA,8IAAY;IAC7B,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,kJAAQ;IAE1B,+DAA+D;IAC/D,IAAA,0KAAS;+BAAC;YACR,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB;uCAChE,CAAC,OAAO;oBACN,IAAI,UAAU,eAAe,SAAS;wBACpC,OAAO,IAAI,CAAC;wBACZ,OAAO,OAAO;oBAChB;oBAEA,mCAAmC;oBACnC,IAAI,UAAU,qBAAqB;wBACjC,OAAO,IAAI,CAAC;oBACd;gBACA,qBAAqB;gBACvB;;YAEF;uCAAO;oBACL,aAAa,WAAW;gBAC1B;;QACF;8BAAG;QAAC;QAAU;KAAO;IAErB,qBACE,6LAAC;QAAI,OAAO;YAAE,OAAO;YAAQ,UAAU;YAAS,QAAQ;YAAQ,YAAY;QAAO;kBACjF,cAAA,6LAAC,mLAAI;YACH,gBAAgB;YAChB,YAAY;gBAAE,OAAO,oLAAS;YAAC;YAC/B,OAAO;YACP,WAAW,EAAE;YACb,YAAW;;;;;;;;;;;AAInB;GArCwB;;QAEP,kJAAS;QACN,kJAAQ;;;KAHJ","debugId":null}}]
}