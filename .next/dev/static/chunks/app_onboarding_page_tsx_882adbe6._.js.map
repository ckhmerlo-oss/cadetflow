{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/onboarding/page.tsx"],"sourcesContent":["// in app/onboarding/page.tsx\r\n'use client'\r\n\r\nimport { createClient } from '@/utils/supabase/client'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useState } from 'react' // <-- Removed useEffect\r\n\r\nexport default function OnboardingPage() {\r\n  const supabase = createClient()\r\n  const router = useRouter()\r\n\r\n  // Form state\r\n  const [firstName, setFirstName] = useState('')\r\n  const [lastName, setLastName] = useState('')\r\n  \r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  // (Removed the useEffect that fetched companies)\r\n\r\n  // Handle the form submission\r\n  async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    setError(null)\r\n\r\n    // *** UPDATED: Only sends name ***\r\n    const { error: rpcError } = await supabase.rpc('update_my_onboarding_profile', {\r\n      p_first_name: firstName,\r\n      p_last_name: lastName\r\n    })\r\n\r\n    if (rpcError) {\r\n      setError(rpcError.message)\r\n      setLoading(false)\r\n    } else {\r\n      // Success! Send them to the dashboard.\r\n      router.push('/')\r\n      router.refresh() // Refresh the layout to get new permissions/logo\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        <div>\r\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-950 dark:text-white\">\r\n            Welcome to CadetFlow\r\n          </h2>\r\n          <p className=\"mt-2 text-center text-sm text-gray-600 dark:text-gray-400\">\r\n            Please complete your profile to continue.\r\n          </p>\r\n        </div>\r\n        <form className=\"mt-8 space-y-6 bg-white dark:bg-gray-800 p-8 shadow-lg rounded-lg\" onSubmit={handleSubmit}>\r\n          \r\n          <div>\r\n            <label htmlFor=\"first-name\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-200\">\r\n              First Name\r\n            </label>\r\n            <input\r\n              id=\"first-name\"\r\n              name=\"first-name\"\r\n              type=\"text\"\r\n              required\r\n              value={firstName}\r\n              onChange={(e) => setFirstName(e.target.value)}\r\n              className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n              placeholder=\"John\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"last-name\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-200\">\r\n              Last Name\r\n            </label>\r\n            <input\r\n              id=\"last-name\"\r\n              name=\"last-name\"\r\n              type=\"text\"\r\n              required\r\n              value={lastName}\r\n              onChange={(e) => setLastName(e.target.value)}\r\n              className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n              placeholder=\"Doe\"\r\n            />\r\n          </div>\r\n\r\n          {/* --- Company Dropdown Removed --- */}\r\n          \r\n          {error && <p className=\"text-sm text-red-600\">{error}</p>}\r\n\r\n          <div>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-400\"\r\n            >\r\n              {loading ? 'Saving...' : 'Save and Continue'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;AAG7B;AACA;AACA,mRAAiC,wBAAwB;;;AAJzD;;;;AAMe,SAAS;;IACtB,MAAM,WAAW,IAAA,8IAAY;IAC7B,MAAM,SAAS,IAAA,kJAAS;IAExB,aAAa;IACb,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,iDAAiD;IAEjD,6BAA6B;IAC7B,eAAe,aAAa,CAAmC;QAC7D,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;QAET,mCAAmC;QACnC,MAAM,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,SAAS,GAAG,CAAC,gCAAgC;YAC7E,cAAc;YACd,aAAa;QACf;QAEA,IAAI,UAAU;YACZ,SAAS,SAAS,OAAO;YACzB,WAAW;QACb,OAAO;YACL,uCAAuC;YACvC,OAAO,IAAI,CAAC;YACZ,OAAO,OAAO,IAAG,iDAAiD;QACpE;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;;sCACC,6LAAC;4BAAG,WAAU;sCAAyE;;;;;;sCAGvF,6LAAC;4BAAE,WAAU;sCAA4D;;;;;;;;;;;;8BAI3E,6LAAC;oBAAK,WAAU;oBAAoE,UAAU;;sCAE5F,6LAAC;;8CACC,6LAAC;oCAAM,SAAQ;oCAAa,WAAU;8CAA6D;;;;;;8CAGnG,6LAAC;oCACC,IAAG;oCACH,MAAK;oCACL,MAAK;oCACL,QAAQ;oCACR,OAAO;oCACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;oCAC5C,WAAU;oCACV,aAAY;;;;;;;;;;;;sCAIhB,6LAAC;;8CACC,6LAAC;oCAAM,SAAQ;oCAAY,WAAU;8CAA6D;;;;;;8CAGlG,6LAAC;oCACC,IAAG;oCACH,MAAK;oCACL,MAAK;oCACL,QAAQ;oCACR,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,WAAU;oCACV,aAAY;;;;;;;;;;;;wBAMf,uBAAS,6LAAC;4BAAE,WAAU;sCAAwB;;;;;;sCAE/C,6LAAC;sCACC,cAAA,6LAAC;gCACC,MAAK;gCACL,UAAU;gCACV,WAAU;0CAET,UAAU,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOvC;GAjGwB;;QAEP,kJAAS;;;KAFF","debugId":null}}]
}