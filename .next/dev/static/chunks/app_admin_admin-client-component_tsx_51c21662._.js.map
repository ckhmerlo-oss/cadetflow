{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ckhme/my-workflow-app/app/admin/admin-client-component.tsx"],"sourcesContent":["// in app/admin-client-component.tsx\r\n'use client';\r\n\r\nimport { createClient } from '@/utils/supabase/client';\r\nimport type { User } from '@supabase/supabase-js';\r\nimport React, { useState, useEffect } from 'react';\r\n\r\ntype AcademicTerm = {\r\n  id: string;\r\n  term_name: string;\r\n  start_date: string;\r\n  end_date: string;\r\n};\r\n\r\n// --- Helper: Icon Components ---\r\nconst LockIcon = () => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-12 h-12 text-gray-400\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16.5 10.5V6.75a4.5 4.5 0 0 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z\" />\r\n  </svg>\r\n);\r\nconst UploadIcon = () => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5\" />\r\n  </svg>\r\n);\r\nconst TrashIcon = () => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.548 0A48.108 48.108 0 0 1 6.75 5.397m10.5-2.572V3.375c0-.621-.504-1.125-1.125-1.125H8.625c-.621 0-1.125.504-1.125 1.125v2.25\" />\r\n  </svg>\r\n);\r\n\r\ntype UploadResult = {\r\n  successes: string[];\r\n  failures: { email: string; reason: string }[];\r\n};\r\n\r\n// --- Client Component ---\r\nexport function AdminSettingsClient({ user }: { user: User }) {\r\n  const supabase = createClient();\r\n  const [isVerified, setIsVerified] = useState(false);\r\n  const [password, setPassword] = useState('');\r\n  const [authError, setAuthError] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // --- Admin Data State ---\r\n  const [terms, setTerms] = useState<AcademicTerm[]>([]);\r\n  const [dataError, setDataError] = useState<string | null>(null);\r\n  const [isLoadingData, setIsLoadingData] = useState(false);\r\n  \r\n  // --- Form State ---\r\n  const [newTermName, setNewTermName] = useState('');\r\n  const [newTermStart, setNewTermStart] = useState('');\r\n  const [newTermEnd, setNewTermEnd] = useState('');\r\n\r\n  // --- Bulk Add State ---\r\n  const [csvFile, setCsvFile] = useState<File | null>(null);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadResult, setUploadResult] = useState<UploadResult | null>(null);\r\n  const [uploadError, setUploadError] = useState<string | null>(null);\r\n\r\n\r\n  // Fetch data *after* verification\r\n  useEffect(() => {\r\n    if (isVerified) {\r\n      fetchAdminData();\r\n    }\r\n  }, [isVerified, supabase]);\r\n\r\n  async function fetchAdminData() {\r\n    setIsLoadingData(true);\r\n    setDataError(null);\r\n    const { data, error } = await supabase.rpc('get_all_academic_terms');\r\n    if (error) {\r\n      setDataError(error.message);\r\n    } else {\r\n      setTerms(data as AcademicTerm[]);\r\n    }\r\n    setIsLoadingData(false);\r\n  }\r\n\r\n  // Handle the password verification\r\n  const handleVerifyPassword = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n    setAuthError(null);\r\n\r\n    const { error } = await supabase.auth.signInWithPassword({\r\n      email: user.email!,\r\n      password: password,\r\n    });\r\n\r\n    if (error) {\r\n      setAuthError('Incorrect password. Please try again.');\r\n    } else {\r\n      setIsVerified(true);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n  \r\n  // --- Form Handlers ---\r\n  const handleCreateTerm = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!newTermName || !newTermStart || !newTermEnd) {\r\n      setDataError(\"All fields are required.\");\r\n      return;\r\n    }\r\n    setIsLoadingData(true);\r\n    const { error } = await supabase.rpc('create_academic_term', {\r\n      p_term_name: newTermName,\r\n      p_start_date: newTermStart,\r\n      p_end_date: newTermEnd,\r\n    });\r\n    if (error) {\r\n      setDataError(error.message);\r\n    } else {\r\n      setNewTermName('');\r\n      setNewTermStart('');\r\n      setNewTermEnd('');\r\n      fetchAdminData(); // Refresh list\r\n    }\r\n    setIsLoadingData(false);\r\n  };\r\n  \r\n  const handleDeleteTerm = async (termId: string) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this term?\")) return;\r\n    setIsLoadingData(true);\r\n    const { error } = await supabase.rpc('delete_academic_term', { p_term_id: termId });\r\n    if (error) {\r\n      setDataError(error.message);\r\n    } else {\r\n      fetchAdminData(); // Refresh list\r\n    }\r\n    setIsLoadingData(false);\r\n  };\r\n\r\n  // --- Bulk Add Handlers ---\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files.length > 0) {\r\n      setCsvFile(e.target.files[0]);\r\n      setUploadResult(null);\r\n      setUploadError(null);\r\n    }\r\n  };\r\n\r\n  // *** UPDATED FUNCTION WITH BETTER ERROR HANDLING ***\r\n  const handleBulkAddSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!csvFile) {\r\n      setUploadError(\"Please select a CSV file to upload.\");\r\n      return;\r\n    }\r\n\r\n    setIsUploading(true);\r\n    setUploadError(null);\r\n    setUploadResult(null);\r\n\r\n    try {\r\n      const fileText = await csvFile.text();\r\n      \r\n      const { data, error } = await supabase.functions.invoke('bulk-create-users', {\r\n        body: fileText,\r\n      });\r\n\r\n      if (error) {\r\n        // --- START NEW ERROR HANDLING ---\r\n        // This is the new, more detailed error parsing\r\n        let detailedError = error.message;\r\n        \r\n        // Functions often return error details in `error.context`\r\n        // Let's try to parse it as JSON\r\n        if (error.context) {\r\n          try {\r\n            // Deno functions often return a JSON string in the body\r\n            const errorBody = await error.context.json();\r\n            if (errorBody && errorBody.error) {\r\n              detailedError = errorBody.error;\r\n            }\r\n          } catch(parseError) {\r\n            // Not JSON, just use the generic message\r\n            console.warn(\"Could not parse function error context:\", parseError);\r\n          }\r\n        }\r\n        \r\n        throw new Error(detailedError);\r\n        // --- END NEW ERROR HANDLING ---\r\n      }\r\n      \r\n      // Check for an error *within* a 200 response\r\n      if (data.error) {\r\n         throw new Error(data.error);\r\n      }\r\n      \r\n      setUploadResult(data as UploadResult);\r\n\r\n    } catch (error: any) {\r\n      console.error(\"Full error object from function invoke:\", error);\r\n      setUploadError(`Upload failed: ${error.message}`); // This will now show the detailed message\r\n    }\r\n\r\n    setIsUploading(false);\r\n  };\r\n\r\n\r\n  // --- RENDER LOGIC ---\r\n\r\n  // 1. Password Prompt\r\n  if (!isVerified) {\r\n    return (\r\n      <div className=\"flex min-h-[calc(100vh-64px)] items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n        <div className=\"w-full max-w-md space-y-8 p-8 bg-white dark:bg-gray-800 shadow-lg rounded-xl\">\r\n          <div className=\"flex flex-col items-center\">\r\n            <LockIcon />\r\n            <h2 className=\"mt-6 text-center text-2xl font-bold tracking-tight text-gray-900 dark:text-white\">\r\n              Admin Access Required\r\n            </h2>\r\n            <p className=\"mt-2 text-center text-sm text-gray-600 dark:text-gray-400\">\r\n              Please re-enter your password to manage site settings.\r\n            </p>\r\n          </div>\r\n          <form className=\"space-y-6\" onSubmit={handleVerifyPassword}>\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Email</label>\r\n              <input\r\n                id=\"email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                autoComplete=\"email\"\r\n                value={user.email || ''}\r\n                disabled\r\n                className=\"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-400 shadow-sm sm:text-sm\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"password\"className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Password</label>\r\n              <input\r\n                id=\"password\"\r\n                name=\"password\"\r\n                type=\"password\"\r\n                autoComplete=\"current-password\"\r\n                required\r\n                autoFocus\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n              />\r\n            </div>\r\n\r\n            {authError && (\r\n              <p className=\"text-sm text-red-600 dark:text-red-400\">{authError}</p>\r\n            )}\r\n\r\n            <div>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading}\r\n                className=\"flex w-full justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-gray-400\"\r\n              >\r\n                {isLoading ? 'Verifying...' : 'Unlock'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // 2. Verified Admin Panel\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8\">\r\n      <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Admin Settings</h1>\r\n      \r\n      {dataError && <div className=\"p-4 text-red-700 bg-red-100 dark:bg-red-900/30 dark:text-red-400 rounded-md\">{dataError}</div>}\r\n      \r\n      {/* --- Academic Terms Manager --- */}\r\n      <AdminSection title=\"Manage Academic Terms\">\r\n        <form onSubmit={handleCreateTerm} className=\"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border dark:border-gray-700\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Term Name</label>\r\n            <input type=\"text\" placeholder=\"e.g., Fall 2025\" value={newTermName} onChange={e => setNewTermName(e.target.value)} required className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm sm:text-sm\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Start Date</label>\r\n            <input type=\"date\" value={newTermStart} onChange={e => setNewTermStart(e.target.value)} required className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm sm:text-sm\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">End Date</label>\r\n            <input type=\"date\" value={newTermEnd} onChange={e => setNewTermEnd(e.target.value)} required className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-white shadow-sm sm:text-sm\" />\r\n          </div>\r\n          <button type=\"submit\" disabled={isLoadingData} className=\"self-end py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400\">\r\n            {isLoadingData ? '...' : 'Add Term'}\r\n          </button>\r\n        </form>\r\n        \r\n        <div className=\"mt-4 flow-root\">\r\n          <div className=\"overflow-x-auto border rounded-lg dark:border-gray-700\">\r\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\r\n              <thead className=\"bg-gray-50 dark:bg-gray-800\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase\">Term Name</th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase\">Start Date</th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase\">End Date</th>\r\n                  <th className=\"relative px-6 py-3\"><span className=\"sr-only\">Delete</span></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white dark:bg-gray-800/50 divide-y divide-gray-200 dark:divide-gray-700\">\r\n                {isLoadingData && <tr><td colSpan={4} className=\"p-4 text-center text-gray-500\">Loading...</td></tr>}\r\n                {terms.map((term) => (\r\n                  <tr key={term.id}>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white\">{term.term_name}</td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300\">{term.start_date}</td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300\">{term.end_date}</td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                      <button onClick={() => handleDeleteTerm(term.id)} disabled={isLoadingData} className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 disabled:text-gray-400\">\r\n                        <TrashIcon />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </AdminSection>\r\n\r\n      {/* --- Bulk User Upload --- */}\r\n      <AdminSection title=\"Bulk User Upload\">\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          Upload a CSV file with columns: `email`, `first_name`, `last_name`.\r\n          The `password` column is optional; if not provided, a secure random password will be generated.\r\n        </p>\r\n        <form className=\"mt-4 p-6 border dark:border-gray-700 rounded-lg\" onSubmit={handleBulkAddSubmit}>\r\n          <label\r\n            htmlFor=\"file-upload\"\r\n            className=\"relative flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 dark:border-gray-600 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50\"\r\n          >\r\n            <div className=\"flex flex-col items-center justify-center pt-5 pb-6\">\r\n              <UploadIcon />\r\n              <p className=\"mb-2 text-sm text-gray-500 dark:text-gray-400\">\r\n                {csvFile ? (\r\n                  <span className=\"font-semibold text-green-600 dark:text-green-400\">{csvFile.name}</span>\r\n                ) : (\r\n                  <><span className=\"font-semibold\">Click to upload a .csv file</span></>\r\n                )}\r\n              </p>\r\n            </div>\r\n            <input id=\"file-upload\" name=\"file-upload\" type=\"file\" className=\"hidden\" accept=\".csv\" onChange={handleFileChange} />\r\n          </label>\r\n          \r\n          <button\r\n            type=\"submit\"\r\n            disabled={isUploading || !csvFile}\r\n            className=\"mt-4 w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none disabled:bg-gray-400\"\r\n          >\r\n            {isUploading ? 'Uploading...' : 'Upload and Create Users'}\r\n          </button>\r\n        </form>\r\n\r\n        {/* --- Upload Results --- */}\r\n        {uploadError && (\r\n          <div className=\"mt-4 p-4 text-red-700 bg-red-100 dark:bg-red-900/30 dark:text-red-400 rounded-md\">\r\n            <p className=\"font-bold\">Error</p>\r\n            <p className=\"text-sm\">{uploadError}</p>\r\n          </div>\r\n        )}\r\n        {uploadResult && (\r\n          <div className=\"mt-4 p-4 text-gray-700 bg-gray-100 dark:bg-gray-900/30 dark:text-gray-300 rounded-md\">\r\n            <p className=\"font-bold text-green-600 dark:text-green-400\">Upload Complete</p>\r\n            <p className=\"text-sm\">{`Successfully created ${uploadResult.successes.length} users.`}</p>\r\n            {uploadResult.failures.length > 0 && (\r\n              <div className=\"mt-2\">\r\n                <p className=\"font-bold text-red-600 dark:text-red-400\">Failed to create {uploadResult.failures.length} users:</p>\r\n                <ul className=\"list-disc list-inside text-sm text-red-500 dark:text-red-400\">\r\n                  {uploadResult.failures.map((fail, idx) => (\r\n                    <li key={idx}><strong>{fail.email}:</strong> {fail.reason}</li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </AdminSection>\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- Helper: Section Component ---\r\nfunction AdminSection({ title, children }: { title: string, children: React.ReactNode }) {\r\n  return (\r\n    <section className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\r\n      <h2 className=\"text-2xl font-semibold text-gray-900 dark:text-white border-b dark:border-gray-700 pb-4 mb-6\">\r\n        {title}\r\n      </h2>\r\n      <div className=\"space-y-4\">\r\n        {children}\r\n      </div>\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}